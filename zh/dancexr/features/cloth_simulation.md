---
locale: zh-CN
layout: single
toc: true
title: 布料模拟
sidebar:
  nav: "docs-zh"
---
[Eng](/dancexr/features/cloth_simulation) | [繁中](/tw/dancexr/features/cloth_simulation) | [日本語](/jp/dancexr/features/cloth_simulation) | [한국어](/kr/dancexr/features/cloth_simulation) | [简中](/zh/dancexr/features/cloth_simulation)

# 服装模拟
服装模拟通过模拟粒子之间的运动和约束来创建逼真的服装和布料效果。从版本2024.8开始，您可以为您的角色创建服装，并观察它们随着动作的移动和互动。

新系统的关键特点是

* 无条件稳定，无论条件有多极端，模拟都会始终恢复到稳定状态。
* 与现有的物理和动画系统一起在单独的线程上实时并行运行。这使我们能够利用多核CPU的性能，并提供最佳性能。
* 自定义曲线碰撞器形状。与传统的几何形状不同，我们的自定义碰撞器模型可以几乎完美匹配曲线身体部位。

### 配置
“服装模拟”配置可以在演员菜单的“专业版”部分找到。

* 快速控制：在设置的顶部，您可以找到“重置”模拟或快速“重建”布料网格的控件。
* 网格配置：您可以创建2个布料网格并分别配置它们。在这里，您可以控制形状、大小、密度和锚定选项。
* 表面和纹理：调整布料网格的材质。
* 互动：在这里，您可以实时缩小布料网格，启用拖动和撕裂，是的，您可以用指针撕裂布料网格，或让它因自身重量而破裂。
* 碰撞器调整：调整模型的碰撞器。
* 模拟设置：控制粒子大小和约束的遵从性
* 自碰撞：控制粒子之间的碰撞
* 物理属性：重力、摩擦等
* 计算设置：控制模拟帧率、子步骤和其他参数

### 网格创建
布料网格是根据您设置的配置程序生成的。您可以查看网格预设以获取一些示例。

基本配置包括
* 内半径：布料网格起始圆的半径
* 长度：布料网格延伸多长
* 斜率：布料网格延伸的角度。0表示圆柱形，90表示平圆。
* 分辨率：布料网格中粒子的密度。更高的分辨率意味着更多的粒子和更多的计算。

您可以选择几种不同的拓扑选项。

使用自适应六边形或矩形选项，布料网格将根据每行的周长增加或减少粒子数量。分割选项允许您在左右两侧分割布料网格。

使用水平布局选项，与上述两种选项基本相同，但您可以部分指定锚定。

使用垂直布局选项，每行具有完全相同数量的粒子，但您可以在间隔处分割布料网格。

### 锚定
您可以通过选择要锚定的身体部位将布料网格锚定到模型。布料网格将附在所选的身体部位上，并随之移动。

### 性能指南
模拟器更喜欢更高和稳定的帧率。我们建议在“显示和用户界面”设置中选择适当的固定帧率，并在“计算”设置中为布料模拟选择相应的帧率。

默认设置将模拟帧率设置为固定的90，如果您的系统只能做60或30，那也应该可以正常工作，只是会有一点慢动作效果。您可以增加子步骤的数量来补偿这一点。

### 碰撞器调整
布料模拟系统使用自己的碰撞器模型，并不会与物理组件互动。默认设置是针对XPS模型进行调整的，应该适用于大多数DOA模型。对于PMX，身体比例变化很大，因此我们没有一种大小适合所有的解决方案，但应该很容易调整碰撞器以适应模型。

首先打开可视化，这样您就可以看到碰撞器，然后转到每个部分以调整身体部位的形状和大小。

您可以将碰撞器想象为两个末端带有可调整平滑曲线的球体。您可以调整
* 两个球体的位置
* 分别调整球体的半径
* 两者之间曲线的值。正值为凸，负值为凹。

目前，布料系统与其他物理组件之间没有互动。唯一的例外是XPS胸部物理，其中包含新设置，以创建与布料模拟兼容的碰撞器。

### 将模型网格转换为布料<a id="mesh_to_cloth"></a>

您现在可以将模型网格转换为布料，并使用布料模拟系统进行模拟。

只需在“网格转换为布料”设置中的网格列表中选中复选框，将网格转换为布料。之后，整个网格将开始自由移动，就像一块布料。但您可以使用以下选项进行约束。

您可以为每个网格选择锚定骨骼，以将网格约束到某些骨骼。您还可以为约束指定高度限制，这意味着只有在该高度范围内的粒子才会被约束到所选的骨骼。