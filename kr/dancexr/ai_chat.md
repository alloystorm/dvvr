---
layout: single
title: AI 기반 음성 채팅
toc: true
sidebar:
  nav: "docs-kr"
---

[영어](/dancexr/ai_chat) | [繁中](/tw/dancexr/ai_chat) | [일본어](/jp/dancexr/ai_chat) | [한국어](/kr/dancexr/ai_chat) | [간체중국어](/zh/dancexr/ai_chat)

## AI 기반 음성 채팅

### 주요 기능
* OpenAI, 로컬 또는 원격 텍스트 생성 웹UI를 사용할 수 있는 옵션
* AI가 생성한 메시지를 음성으로 변환하기 위한 내장 TTS 엔진
* 자동으로 캐릭터의 얼굴을 애니메이션화하여 말하는 동안 입모양을 맞추는 내장 립싱크
* 음성을 텍스트로 변환하여 AI에게 전송하는 내장 음성 인식
* 900개 이상의 영어 음성이 포함되어 있으며, 각 캐릭터마다 고유한 음성을 선택할 수 있습니다.

### 제한 사항
* 음성 엔진은 Windows 전용입니다. 다른 플랫폼에서는 음성 인식을 사용하여 대화할 수 있지만 응답은 텍스트만 됩니다.
## ## AI 서비스
캐릭터에 지능을 부여하기 위해 사용할 수 있는 다양한 AI 서비스 옵션이 있습니다. 각 옵션의 장단점을 아래에서 논의하겠습니다.

### OpenAI (ChatGPT)
현재 가장 지능적인 옵션입니다.

**장점:**
* 스마트
* 빠름
* 다른 원격 옵션에 비해 비용 효율적

**단점:**
* 검열됨

**설정:**
DanceXR에서 OpenAI 서비스를 사용하려면 OpenAI API 키가 필요합니다.
* OpenAI 계정에 등록하고 로그인하세요.
* 페이지 오른쪽 상단에 있는 프로필 아이콘을 클릭하세요.
* "API 키 보기"를 선택하여 API 페이지를 엽니다.
* "새 비밀 키 생성"을 클릭하고 키가 표시되면 복사하세요. 키는 여기에서만 **한 번 표시**되므로 나중에 전체 키를 검색할 수 없으니 분실하지 마세요.
* DanceXR을 열고 채팅 메뉴에서 Config 아이콘을 클릭하세요.
* AI 서비스로 이동하여 "OpenAI API 키" 상자에 키를 붙여넣으세요.
* 그런 다음 "AI 서비스" 드롭다운에서 "OpenAI (ChatGPT)"를 선택하면 설정이 완료됩니다.


### OobaBooga 텍스트 생성 웹UI
이 옵션을 사용하면 PC가 충분히 강력한 경우 로컬에서 대형 언어 모델 (LLM)을 실행할 수 있습니다. 7b 또는 13b 모델은 채팅에 충분합니다.

**장점:**
* 개인 정보 보호, 아무 것도 전송되지 않고 모든 작업이 로컬에서 진행됩니다.
* NSFW 콘텐츠에 대해 검열되지 않은 모델을 사용할 수 있습니다.
* 무료

**단점:**
* OpenAI 모델만큼 지능적이지 않음
* 약간의 설정이 필요함
* 충분한 VRAM이 없으면 매우 느려질 수 있습니다. 특히 DanceXR을 동시에 실행할 때 시스템은 LLM을 가상 VRAM으로 밀어넣어 성능을 저하시킬 수 있습니다.

**설정:**
* https://github.com/oobabooga/text-generation-webui의 지침을 따라 다운로드하고 설치하세요.
* WebUI가 DanceXR과 함께 작동하도록하려면 API를 켜야 합니다. 이를 위해 CMD_FLAGS.txt 파일을 열고 "--listen --api"를 추가한 다음 다시 시작하세요.
* 실행 중인 경우 모델 탭으로 이동하여 모델을 다운로드하세요 (이미 가지고 있지 않은 경우).
* 다음 2개 모델을 사용하는 것을 권장합니다: https://huggingface.co/TheBloke/Luna-AI-Llama2-Uncensored-GPTQ (7b, 실행이 쉬움) https://huggingface.co/TheBloke/Nous-Hermes-Llama2-GPTQ (13b, 더 지능적)
* 모델 목록을 새로 고침하고로드하세요.
* DanceXR에서 AI 서비스 -> 서비스 선택에서 "Local WebUI"를 선택하세요.
* 기본 URL (http://127.0.0.1:5000)은 설정에 따라 다른 포트 또는 URL을 요구하지 않는 한 작동해야 합니다.


### Runpod와 같은 원격 서비스 사용하여 WebUI 실행
GPU를 임대하고 AI 모델을 실행할 수 있는 서비스가 있습니다. Runpod는 그 중 하나입니다. WebUI를 위한 템플릿이 있으며 로컬에서 실행하는 것보다 설정이 쉽습니다.

**장점:**
* 빠르고 쉬움
* 로컬 GPU에서 실행할 수 없는 모델도 선택할 수 있음

**단점:**
* OpenAI보다 약간 더 비싸다
* 매번 모델을 다운로드해야 함. 하지만 몇 분 정도 걸릴 것입니다.

**설정:**
* "Community Cloud"에서 GPU를 선택하고 "Deploy"를 클릭하세요. 3080ti는 13b 모델을 실행하기에 충분합니다. 시간당 26센트입니다.
* 템플릿 드롭다운에서 "RunPod TheBloke LLMs"를 선택하세요.
* 실행 중인 경우 연결을 클릭하면 WebUI 및 API에 대한 링크가 제공되며, API의 URL을 복사하여 DanceXR의 "Remote WebUI URL" 상자에 붙여넣으세요.
* WebUI 링크를 클릭한 다음 모델 탭으로 이동하여 모델을 다운로드하세요.
* 다음 2개 모델을 사용하는 것을 권장합니다: https://huggingface.co/TheBloke/Luna-AI-Llama2-Uncensored-GPTQ (7b, 실행이 쉬움) https://huggingface.co/TheBloke/Nous-Hermes-Llama2-GPTQ (13b, 더 지능적)
* 모델 목록을 새로 고침하고로드하세요.
## ## 채팅 제어

### 템플릿
템플릿은 AI 모델이 각 캐릭터에 대한 채팅 메시지를 생성하는 데 사용되는 것입니다. 복잡해 보일 수도 있지만 실제로는 매우 간단합니다. 기본 템플릿을 열어보려면 채팅/템플릿 폴더를 열면 됩니다.

기본적으로 텍스트로 특정 작업을 요청하는 것과 같습니다. 기본 템플릿을 수정하고 다른 이름으로 저장하여 채팅 내용에 어떤 영향을 미치는지 확인할 수 있습니다. 예를 들어, 채팅의 시나리오를 설정하기 위해 환경에 대한 설명을 추가할 수 있습니다.

DanceXR에서 채팅 설정 -> 템플릿으로 이동하여 생성한 템플릿을 선택할 수 있습니다.


### 캐릭터
캐릭터는 배우 모델의 이름에서 파생됩니다. 예를 들어 "Koharu Bouquet Cattleya Hair B Side Ponytail"에서 "Koharu"는 캐릭터 이름으로 해석되고, 나머지 "Bouquet Cattleya Hair B Side Ponytail"은 그녀의 의상에 대한 설명으로 사용됩니다.

언어 모델은 잘 알려진 캐릭터인 경우에는 그들이 누구인지와 그들이 어떻게 행동하는지를 알고 있을 수도 있으므로, 특히 OpenAI를 사용할 때 그들을 알고 있을 수 있습니다.

캐릭터 설정에서 캐릭터에 대한 설명과 성격을 입력할 수 있으며, 이는 채팅에서 그들이 어떻게 행동하는지에 큰 영향을 미칠 것입니다. 예를 들어, 자랑스럽고 거만한 캐릭터를 "순종적이고 기꺼이 도와주는" 캐릭터로 바꿀 수 있습니다.

"Player"도 사실상 캐릭터이며, 자신에 대한 이름, 설명 및 성격을 변경하여 원하는 대로 할 수 있습니다.


### 페르소나
캐릭터 설정에는 페르소나 드롭다운도 있습니다. 이를 사용하면 TavernAI와 같은 AI 역할극 프로그램에서 다운로드한 캐릭터를 사용할 수 있습니다. 이들은 일반적으로 PNG 형식으로 제공됩니다. png 이미지의 메타데이터에는 캐릭터에 대한 설명이 포함되어 있습니다.

이 온라인 캐릭터 편집기를 사용하여 png 캐릭터를 json 형식으로 변환하십시오. https://zoltanai.github.io/character-editor/

그런 다음 json을 "chat/personas" 폴더에 넣으면 캐릭터 설정의 페르소나 드롭다운에 나타납니다. 이렇게하면 페르소나의 설명이 캐릭터 설명을 덮어씁니다.


### 채팅 기록
채팅 기록은 새로운 콘텐츠를 생성할 때마다 AI에게 전송되어 맥락을 유지하기 위해 사용됩니다. 다른 시나리오나 주제로 전환하려면 먼저 기록을 지워서 이전의 채팅 맥락이 AI에게 영향을 미치지 않도록해야 합니다. 또한 이를 사용하여 환경을 조작하고 채팅을 이끌 수 있습니다. 예를 들어, 메시지에서 어떤 일이 발생했다고 설명하면 AI는 해당 맥락에서 계속됩니다.

기록 인터페이스에서 채팅 메시지 옆의 아이콘을 클릭하여 채팅 기록을 조작할 수 있습니다. 옵션은 다음과 같습니다.

* 재생성: 아래의 모든 메시지를 삭제하고 AI에게 이 메시지를 재생성하도록 함
* 다시 작성: 메시지를 가져와 직접 다시 작성합니다. 이렇게 할 때는 메시지 앞의 이름과 콜론을 그대로 유지해야 합니다. 그렇지 않으면 시스템이 이 메시지가 누구의 것인지 알 수 없습니다.
* 재생: 이 메시지부터 채팅 기록을 재생합니다.
* 항목 삭제: 이 메시지를 삭제합니다.
* 위 삭제: 이 메시지 위의 모든 메시지를 삭제합니다.
* 아래 삭제: 이 메시지 아래의 모든 메시지를 삭제합니다.


### 온도
이 값은 AI 모델이 채팅 메시지를 생성할 때 얼마나 자유롭게 할 수 있는지를 제어합니다. 이미지 생성과 마찬가지로 동일한 입력으로 생성되는 경우, 각 생성마다 약간 다를 수 있으며 온도는 그 변동폭을 제어합니다.


### 존재 벌칙과 빈도 벌칙
이 값을 증가시켜 AI가 반복되는 콘텐츠를 생성하는 확률을 줄일 수 있습니다.


### 최대 생성 토큰 및 최대 프롬프트 길이
LLM에는 토큰 제한이 있으며, 이 제한을 초과하는 콘텐츠는 올바르게 생성되지 않습니다.


### 자동 생성 및 플레이어용 생성
"자동으로 다음 생성"을 켜면 타이머가 종료될 때 AI가 자동으로 다음 메시지를 생성할 수 있습니다.

"플레이어용 생성"을 켜면 AI가 플레이어를 위해 메시지를 생성할 수 있습니다.
## ## 텍스트 음성 변환

### 추가 음성
DanceXR은 Piper라는 TTS 엔진을 사용합니다. 여기에서 DanceXR에서 사용할 수 있는 추가 음성 모델을 듣고 다운로드할 수 있습니다.

https://rhasspy.github.io/piper-samples/

다운로드한 후에는 chat\voices\piper 폴더에 넣으십시오. onnx 및 onnx.json 파일이 모두 필요하다는 점을 기억하십시오.


### 음성 관리자
내장된 음성 모델에는 900개 이상의 다른 음성이 포함되어 있습니다. 기본적으로 우리는 그 중 첫 20개만 활성화하고 있습니다. 사용자가 선택할 수 있는 음성이 너무 많기 때문에 900개는 너무 많습니다. 다른 음성을 활성화하려면 채팅 설정에서 음성 -> 음성 관리자로 이동하여 목록에서 음성 하나를 선택하고 듣고 "선택됨"을 선택하여 음성 목록에 추가할 수 있습니다.

시스템, 플레이어 및 각 캐릭터에 대해 다른 음성을 선택할 수 있습니다.


### 언어 일치 및 대체
AI 모델은 다른 언어 메시지를 생성할 수 있지만 음성 모델은 그렇지 않을 수 있습니다. DanceXR은 메시지의 언어가 무엇인지 판단하려고 시도하고 선택된 음성 언어와 일치하지 않는 경우 음성 설정에서 "대체"를 활성화하면 음성 목록 내에서 해당 언어와 일치하는 다른 음성을 선택할 수 있습니다.


## 음성을 텍스트로 변환

내장된 Whisper 모델은 음성을 텍스트로 변환한 다음 AI에 전송할 수 있습니다. 두 가지 모드, 수동 및 자동 모드가 있습니다.

### 수동 모드
수동 모드는 마이크 버튼을 클릭하면 녹음이 시작되고 완료되면 다시 클릭하여 오디오가 처리되고 결과가 AI에 전송됩니다.


### 자동 모드
자동 모드는 채팅이 비활성화될 때 (캐릭터가 말하지 않을 때) 자동으로 녹음을 시작하고 오디오를 실시간으로 처리한 다음 말하기가 끝나면 전송합니다. 그러나 때로는 그리 똑똑하지 않을 수 있습니다.

하위 기기의 경우 오디오를 텍스트로 처리하는 데 시간이 걸릴 수 있습니다. 따라서 Android, Quest 및 Pico에는 자동 모드를 권장하지 않습니다.


### 키 바인딩
입력 설정에서 마이크 상태를 전환할 버튼을 할당할 수 있으므로 UI에 들어가지 않고도 녹음을 제어할 수 있습니다. 기본적으로 오른쪽 핸드 컨트롤러 메뉴 버튼에 할당되어 있습니다.


## 설정 및 캐릭터 설정 초기화
모든 것이 콘텐츠 라이브러리의 채팅 폴더에 저장됩니다. 모든 것을 기본값으로 재설정하려면 채팅 폴더를 삭제하십시오.