---
layout: single
title: AI 強化語音聊天
toc: true
sidebar:
  nav: "docs-tw"
---

[Eng](/dancexr/ai_chat) | [繁中](/tw/dancexr/ai_chat) | [日本語](/jp/dancexr/ai_chat) | [한국어](/kr/dancexr/ai_chat) | [简中](/zh/dancexr/ai_chat)

## AI 強化語音聊天

### 關鍵功能
* 提供使用 OpenAI、本地或遠端文字生成 WebUI 作為 AI 服務的選項
* 內建 TTS 引擎，將 AI 生成的訊息轉換為語音
* 內建的口型同步功能，自動為角色的臉部動畫配合說話
* 內建語音識別功能，將您的語音轉換為文字並發送給 AI
* 包含超過 900 種英文聲音可供選擇，每個角色都可以擁有獨特的聲音

### 限制
* 語音引擎僅支援 Windows。在其他平台上，您仍然可以使用語音識別進行對話，但回應僅為文字。
## ## AI 服務
有多種選擇可用作 AI 服務，以賦予您的角色智能。我們將在下面討論每個選項的優缺點。

### OpenAI（ChatGPT）
這是目前最智能的選擇。

**優點：**
* 智能
* 快速
* 成本效益高（與其他遠程選項相比）

**缺點：**
* 受審查

**設置：**
要在 DanceXR 中使用 OpenAI 服務，您需要一個 OpenAI API 金鑰。
* 註冊並登錄您的 OpenAI 帳戶。
* 點擊頁面右上角的個人資料圖標。
* 選擇“查看 API 金鑰”以打開 API 頁面。
* 點擊“創建新的秘密金鑰”，並在顯示時複製金鑰。請記住，該金鑰**僅在此處顯示一次**，您無法稍後檢索完整金鑰，因此請勿遺失。
* 打開 DanceXR，從聊天菜單中點擊配置圖標。
* 轉到 AI 服務，將您的金鑰粘貼到“OpenAI API 金鑰”框中。
* 然後在“AI 服務”下拉菜單中選擇“OpenAI（ChatGPT）”，然後您應該可以開始使用了。

### OobaBooga 文本生成 WebUI
如果您的電腦足夠強大，此選項允許您在本地運行大型語言模型（LLM）。7b 或 13b 模型應該足夠進行聊天。

**優點：**
* 隱私，不會發送任何信息，一切都在本地進行。
* 您可以使用未經審查的模型進行 NSFW 內容。
* 免費

**缺點：**
* 不如 OpenAI 模型聰明
* 需要進行一些設置
* 如果 VRAM 不足，可能會變得非常慢。特別是當您同時運行 DanceXR 時，系統可能會將 LLM 推送到虛擬 VRAM 中，這將破壞其性能。

**設置：**
* 按照此處的說明下載並安裝 https://github.com/oobabooga/text-generation-webui
* 要使 WebUI 與 DanceXR 配合工作，您需要打開 API。為此，打開 CMD_FLAGS.txt 文件，並在其中添加“--listen --api”，然後重新啟動它。
* 運行後，轉到模型選項卡，如果尚未擁有模型，則下載一個模型。
* 我們建議使用以下兩個模型之一：https://huggingface.co/TheBloke/Luna-AI-Llama2-Uncensored-GPTQ（7b，更容易運行）https://huggingface.co/TheBloke/Nous-Hermes-Llama2-GPTQ（13b，更聰明）
* 刷新模型列表並加載它。
* 在 DanceXR 中，從 AI 服務 -> 選擇服務 選擇“Local WebUI”。
* 默認的 URL（http://127.0.0.1:5000）應該有效，除非您的設置需要不同的端口或 URL。

### 使用 Runpod 等遠程服務運行 WebUI
有一些服務允許您租用 GPU 並運行 AI 模型。Runpod 就是其中之一。他們有一個 WebUI 的模板，比在本地運行更容易設置。

**優點：**
* 快速且簡單
* 自由選擇任何您想運行的模型。甚至那些在本地 GPU 上無法運行的模型。

**缺點：**
* 比 OpenAI 稍微貴一些
* 每次運行時需要下載模型。但這應該只需要幾分鐘。

**設置：**
* 從“社區雲”中選擇一個 GPU，然後點擊“部署”。3080ti 應該足夠運行一個 13b 模型。這需要每小時 26 美分。
* 從模板下拉菜單中選擇“RunPod TheBloke LLMs”。
* 運行後，點擊連接，它將給您 WebUI 和 API 的鏈接，將 API 的 URL 複製並粘貼到 DanceXR 的“Remote WebUI URL”框中。
* 點擊 WebUI 鏈接，然後轉到模型選項卡下載一個模型。
* 我們建議使用以下兩個模型之一：https://huggingface.co/TheBloke/Luna-AI-Llama2-Uncensored-GPTQ（7b，更容易運行）https://huggingface.co/TheBloke/Nous-Hermes-Llama2-GPTQ（13b，更聰明）
* 刷新模型列表並加載它。
## ## 聊天控制

### 模板
模板是驅動AI模型為每個角色生成聊天消息的依據。你可能會認為它很複雜，但實際上非常簡單。你可以打開chat/templates文件夾來查看默認模板的工作方式。

基本上就像是用純文本告訴某人為你做某些事情。你可以修改默認模板並另存為不同的名稱，以查看它如何影響聊天內容。例如，你可以在其中添加環境的描述，為聊天設定情境。

在DanceXR中，進入聊天設置->模板，選擇你創建的模板。


### 角色
角色是根據演員模型的名稱衍生出來的。例如，“小春花束蘭花側馬尾”，“小春”將被解釋為角色名稱，其餘的“花束蘭花側馬尾”將被用作她的服裝描述。

如果角色是眾所周知的，語言模型可能對角色有一些了解，因此有時它知道他們是誰以及他們的行為方式，尤其是當你使用OpenAI時。

在角色設置中，你可以輸入角色的描述和個性，這將大大影響他們在聊天中的行為。例如，你可以通過將他們描述為“服從且樂於助人”來將一個自豪和傲慢的角色變成順從的角色。

“玩家”在技術上也是一個角色，你可以更改名稱、描述和個性，成為你喜歡的任何人。


### 角色設置
角色設置還有一個角色選擇下拉菜單。這允許你使用從AI角色扮演程序（如TavernAI）下載的角色。這些通常以PNG格式提供。png圖像的元數據包含角色的描述。

使用此在線角色編輯器將png角色轉換為json格式 https://zoltanai.github.io/character-editor/

然後將json放入“chat/personas”文件夾中，它們將出現在角色設置中的角色選擇下拉菜單中。完成後，角色的描述將覆蓋角色描述。


### 聊天歷史
每次生成新內容時，聊天歷史都會被發送給AI，以保持上下文。如果你想切換到不同的情境或話題，請先清除歷史記錄，這樣AI就不會受到先前聊天上下文的影響。你也可以使用這個來操縱環境並推動聊天。例如，如果你在消息中描述了某件事發生，AI將在該上下文中繼續。

請注意，一旦達到提示限制，最舊的消息將被忽略並不包含在上下文中。因此，AI可能會忘記過於久遠的事情。

在聊天界面中，你可以點擊聊天消息旁邊的圖標來操縱聊天歷史。選項包括：

* 重新生成：刪除下面的所有消息，讓AI重新生成此消息
* 重寫：接管消息並自己重寫。當你這樣做時，你需要保持消息前面的名稱和冒號不變，否則系統將不知道這個消息是誰發出的。
* 重播：從此消息重新播放聊天歷史
* 刪除條目：刪除此消息
* 刪除上面：刪除此消息上面的所有消息
* 刪除下面：刪除此消息下面的所有消息


### 溫度
這個值控制AI模型在生成聊天消息時的自由度。就像圖像生成一樣，使用相同的輸入，每次生成可能會稍有不同，而溫度控制它可以變化的程度。


### 存在懲罰和頻率懲罰
增加這些值可以減少AI生成重複內容的機會。


### 最大生成令牌和最大提示長度
LLMs有令牌限制，超過此限制的內容將無法正確生成。


### 自動生成和為玩家生成
打開“自動生成下一條”以允許AI在計時器結束時自動生成下一條消息。

打開“為玩家生成”以允許AI為玩家生成消息。
## ## 文字轉語音

### 附加語音
DanceXR 使用一個名為 Piper 的 TTS 引擎。在這裡，您可以聆聽並下載其他語音模型以在 DanceXR 中使用。

https://rhasspy.github.io/piper-samples/

下載完成後，將它們放入 chat\voices\piper 資料夾中。請注意，onnx 和 onnx.json 檔案都是必需的。

### 語音管理器
內建的語音模型包含超過 900 種不同的語音。預設情況下，我們只啟用其中的前 20 種。因為 900 種語音對於使用者來說太多了。要啟用其他語音，請從聊天設定中進入 語音 -> 語音管理器，從列表中選擇一種語音，聆聽並勾選 "Selected"，以將其添加到語音列表中。

您可以為系統、播放器和每個角色選擇不同的語音。

### 語言匹配和回退
AI 模型可以生成不同語言的訊息。但語音模型則不行。DanceXR 將嘗試確定訊息的語言，如果與所選語音的語言不匹配，啟用語音設定中的 "Fallback" 將允許它選擇與語音列表中的語言匹配的其他語音。

## 語音轉文字
內建的 Whisper 模型可以將您的語音轉換為文字，然後發送給 AI。有兩種模式，手動和自動。

### 手動模式
手動模式意味著您點擊麥克風按鈕，它開始錄音，一旦完成，再次點擊它，音頻將被處理，結果將被發送給 AI。

### 自動模式
自動模式意味著當聊天處於閒置狀態（角色不說話）時，它將自動開始錄音，即時處理音頻，然後在您講話結束時發送它。然而，有時它並不太聰明。

對於低端設備，將音頻轉換為文字可能需要一些時間。因此，不建議在 Android、Quest 和 Pico 上使用自動模式。

### 按鍵綁定
在輸入設定中，您可以指定一個按鈕來切換麥克風狀態，這樣您就可以在不進入 UI 的情況下控制錄音。默認情況下，它被指定為右手控制器的菜單按鈕。

## 重置配置和角色設定
所有內容都保存在您的內容庫的 chat 資料夾中。隨時刪除 chat 資料夾以將所有設置重置為默認值。