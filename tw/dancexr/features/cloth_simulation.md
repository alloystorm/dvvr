---
locale: zh-TW
layout: single
toc: true
title: 布料模擬
sidebar:
  nav: "docs-tw"
---
[Eng](/dancexr/features/cloth_simulation) | [繁中](/tw/dancexr/features/cloth_simulation) | [日本語](/jp/dancexr/features/cloth_simulation) | [한국어](/kr/dancexr/features/cloth_simulation) | [简中](/zh/dancexr/features/cloth_simulation)

# 布料模擬
布料模擬通過模擬粒子之間的運動和約束來創建逼真的服裝和布料效果。從版本2024.8開始，您可以為您的角色創建服裝，觀察它們的移動並與運動互動。

新系統的主要特點是

* 無條件穩定，無論條件有多極端，模擬都將恢復到穩定狀態。
* 實時並行運行在現有物理和動畫系統旁邊的獨立線程上。這使我們能夠利用多核CPU的性能，提供最佳性能。
* 自定義曲線碰撞器形狀。與傳統幾何形狀不同，我們的自定義碰撞器模型允許我們幾乎完美地匹配曲線身體部位。

### 配置
“布料模擬”配置可以在演員菜單的“專業版”部分找到。

* 快速控制：在設置頂部，您可以找到“重置”模擬或快速“重建”布料網格的控件。
* 網格配置：您可以創建2個布料網格並分別配置它們。在這裡，您可以控制形狀、大小、密度和錨定選項。
* 表面和紋理：調整布料網格的材料。
* 互動：在這裡，您可以即時縮小布料網格，啟用拖曳和撕裂，是的，您可以用指針撕裂布料網格，或讓它因自身重量而破裂。
* 碰撞器調整：調整模型的碰撞器。
* 模擬設置：控制粒子大小和約束遵從性
* 自碰撞：控制粒子之間的碰撞
* 物理屬性：重力、摩擦等
* 計算設置：控制模擬幀率、子步和其他參數

### 網格創建
布料網格是根據您設置的配置程序生成的。您可以查看網格預設值以獲得一些示例。

基本配置包括
* 內半徑：布料網格起始圓的半徑
* 長度：布料網格延伸多長
* 斜率：布料網格延伸的角度。0表示圓柱形，90表示平坦圓形。
* 分辨率：布料網格中粒子的密度。更高的分辨率意味著更多的粒子和更多的計算。

您可以選擇幾種不同的拓撲選項。

使用自適應六邊形或矩形選項，布料網格將根據每行的周長增加或減少粒子數量。分割選項允許您在左右兩側分割布料網格。

使用水平布局選項，與上述2個選項基本相同，但您可以部分指定錨定。

使用垂直布局選項，每行具有完全相同數量的粒子，但您可以在一定間隔處分割布料網格。

### 錨定
您可以通過選擇要鏈接到的身體部位來將布料網格鏈接到模型。布料網格將附著在所選身體部位上並隨之移動。

### 性能指南
模擬器更喜歡更高且穩定的幀率。我們建議您在“顯示和UI”設置中選擇適合的固定幀率，並在布料模擬的“計算”設置中選擇相應的幀率。

默認設置將模擬幀率設置為固定的90，如果您的系統只能達到60或30，它仍然應該正常工作，只是會有一點慢動作效果。您可以增加子步數量來補償這一點。

### 碰撞器調整
布料模擬系統使用自己的碰撞器模型，不會與物理組件互動。默認設置是根據XPS模型調整的，應該適用於大多數DOA模型。對於PMX，身體比例變化很大，因此我們沒有一個適合所有情況的解決方案，但應該相當容易調整碰撞器以適應模型。

首先打開可視化，這樣您就可以看到碰撞器，然後進入每個部分調整身體部位的形狀和大小。

您可以將碰撞器想象為兩端各有2個可調整平滑曲線的球體。您可以調整
* 2個球體的位置
* 分別調整球體的半徑
* 兩者之間曲線的值。正值是凸的，負值是凹的。

目前，布料系統與其他物理組件之間沒有互動。唯一的例外是XPS Boobs Physics，其中包含新的設置來創建與布料模擬兼容的碰撞器。

### 將模型網格轉換為布料<a id="mesh_to_cloth"></a>

您現在可以將模型網格轉換為布料並使用布料模擬系統進行模擬。

只需在“Mesh To Cloth”設置中的網格列表中勾選框以將網格轉換為布料。之後，整個網格將開始自由移動，就像一塊布料。但您可以使用以下選項進行約束。

您可以為每個網格選擇錨定骨骼，以將網格約束到某些骨骼。您還可以為約束指定高度限制，這意味著只有在該高度範圍內的粒子才會被約束到所選骨骼。