---
locale: zh-TW
layout: single
title: 透明材料
toc: true
sidebar:
  nav: "docs-tw"
---
[Eng](/dancexr/features/transparency) | [繁中](/tw/dancexr/features/transparency) | [日本語](/jp/dancexr/features/transparency) | [한국어](/kr/dancexr/features/transparency) | [简中](/zh/dancexr/features/transparency)


## 透明材料

透明材料問題主要有兩個方面：

* 判斷材料是否為透明或不透明。
* 透明材料的渲染順序。


### 判斷透明/不透明材料

XPS模型數據包含材料的屬性，我們可以使用這些屬性來判斷是否使用透明模式。因此，XPS模型通常不會出現誤判的情況。

PMX模型不提供這樣的數據，所以我們目前主要使用兩種方法：
* 通過紋理的屬性推斷材料是否透明。如果紋理包含alpha通道，則判定材料為透明。但是，也有例外情況，例如一些材料將alpha通道用作平滑值而不是透明度。
* 通過名稱推斷。例如，如果名稱中包含"shadow"或"hair"等詞語，則判定為透明。

因此，PMX模型可能存在一定比例的誤判情況。


### 透明材料的渲染順序

大多數XPS模型包含渲染順序的數據，因此通常不會出現重大問題。

一些PMX模型的材料沒有合理的渲染順序，這可能導致疊加後出現奇怪的屏幕。

### 透明深度預先通過（HD）
默認情況下，HD和RT版本將打開透明深度預先通過模式。在此模式下，所有透明材料將進行深度預先通過，使用z緩衝區確定材料的層次關係，以確保透明材料的頂層正確渲染。這種方法可以解決層次問題，但缺點是它會丟棄所有底層材料。如果模型需要同時顯示多個層次，可能會出現問題。例如，頭髮和透明服裝或角色被其他透明物體遮擋。此模式可以在系統設置中關閉。

從1.4.3版本開始，可以為每個單獨的材料設置獨立的微調深度預先通過設置：

* 透明預先通過開關：每個材料可以獨立控制是否使用深度預先通過。
* 透明預先通過閾值：在使用深度預先通過的情況下，此參數可用於控制深度預先通過的區域。值越大，深度預先通過的範圍越小。默認設置為0.8。


### 透明材料設置

在每個單獨的材料選項中，您可以更改材料的透明模式，可以設置為自動、強制透明或強制不透明。

在頭髮選項中，您可以更改所有頭髮材料的透明模式。

在全局材料設置中，您可以從幾個不同的選項中選擇透明度排序順序。